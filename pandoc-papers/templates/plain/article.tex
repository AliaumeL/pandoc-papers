%! TEX program = pdflatex
% WARNING: this is a generated file.
%
% Please do not edit this file directly. 
% - If you want to update the medatata of the paper (title, authors, abstract), please
%   edit the `paper-meta.yaml` file in the root of the repository.
% - If you want to update the content of the paper, please edit the latex files
%   in the `src` directory.
% - If you want to update the template itself (e.g., change the layout), please
%   edit the `templates/plain-article.tex` file instead.
\documentclass[9pt,a4paper,twosided]{article}

% we setup a custom geometry because the default one is too narrow
\usepackage{geometry}
\geometry{margin=3.5cm}

% utf-8 for old systems
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

% babel for language settings
\usepackage[english]{babel}

% microtype for better typography
\usepackage{microtype}

$if(draft)$
\usepackage{todonotes}
\usepackage{lineno}
$endif$

% Configure unicode support for xelatex
\ifxetex
  \usepackage{fontspec}
\fi


% math packages
\usepackage{amsmath,amsthm,amssymb,stmaryrd,thmtools,upgreek}

% configure some theorems
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{assumption}[theorem]{Assumption}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{example}[theorem]{Example}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{claim}[theorem]{Claim}


% claim and claim proof environment
\def\cqedsymbol{\ifmmode$$\lrcorner$$\else{\unskip\nobreak\hfil
		\penalty50\hskip1em\null\nobreak\hfil$$\lrcorner$$
		\parfillskip=0pt\finalhyphendemerits=0\endgraf}\fi} 
\newcommand{\cqed}{\renewcommand{\qed}{\cqedsymbol}}

\newenvironment{claimproof}[1][Proof.]{\begin{proof}[#1]}{\renewcommand{\qed}{\hfill$$\blacksquare$$}\end{proof}}
\newcommand{\claimqedhere}{\renewcommand{\qedsymbol}{\hfill$$\blacksquare$$}\qedhere}



% graphics packages
\usepackage{graphicx}
\usepackage[obeyclassoptions,mode=tex]{standalone}
\usepackage{tikz}
\usetikzlibrary{backgrounds}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{positioning}
\usetikzlibrary{automata}
\usetikzlibrary{tikzmark}
\usetikzlibrary{patterns}
\usetikzlibrary{arrows}
\usetikzlibrary{calc}

\tikzset{every state/.style={minimum size=1pt}}
\usepackage{tikz-cd}

% ornaments
\usepackage{pgfornament}


% links inside the document
\usepackage{hyperref}
\usepackage[capitalise,noabbrev,nameinlink]{cleveref}
\Crefname{assumption}{Assumption}{Assumptions}
\crefname{assumption}{Assumption}{Assumptions}
\Crefname{conjecture}{Conjecture}{Conjectures}
\crefname{conjecture}{Conjecture}{Conjectures}
\Crefname{fact}{Fact}{Facts}
\crefname{fact}{Fact}{Facts}
\Crefname{remark}{Remark}{Remarks}
\crefname{remark}{Remark}{Remarks}
\Crefname{example}{Example}{Examples}
\crefname{example}{Example}{Examples}
\Crefname{claim}{Claim}{Claims}
\crefname{claim}{Claim}{Claims}

\usepackage[$if(draft)$composition$else$electronic$endif$,hyperref,xcolor,cleveref]{knowledge}
\knowledgeconfigure{notion}



% Tables 
\usepackage{booktabs}
\usepackage{varwidth}

% Algorithms
\usepackage{algorithm2e}
\Crefname{algocfline}{Algorithm}{Algorithms}
\crefname{algocfline}{Algorithm}{Algorithms}
\crefname{algocf}{Algorithm}{Algorithms}
\Crefname{algocf}{Algorithm}{Algorithms}

% Packages for macro definitions
\usepackage{xparse}
\usepackage{xpatch}
\usepackage{tokcycle}
\usepackage{ifthen}

% Proofs
\usepackage{bussproofs}

% Colors 
\usepackage{ensps-colorscheme}
% parametrize knowledge colors and style
% intro => A4 + emph 
% kl    => normal color, normal size not emph
\knowledgestyle{intro notion}{color={A2}, emphasize}
\knowledgestyle{notion}{color={B1}}
\hypersetup{
    colorlinks=true,
    breaklinks=true,
    linkcolor=A4,
    citecolor=A4,
    urlcolor=A4,
    filecolor=A4,
}

% Knowledge logo
\newcommand{\klogo}{%
\begin{tikzpicture}[scale=0.2,line/.style={draw, line width=0.2pt, line cap=round, line join=round}]
\coordinate (A00) at (0,0);
\coordinate (A01) at (0,1);
\coordinate (A10) at (1,0);
\coordinate (B10) at (1,0.2);
\coordinate (B01) at (0.2,1);

\coordinate (C01) at (0.4,0.7);
\coordinate (C10) at (0.7,0.4);
\coordinate (C12) at (0.4,1.2);
\coordinate (C21) at (1.2, 0.4);
\coordinate (C22) at (1.2, 1.2);

\coordinate (D00) at (C10);
\coordinate (D01) at (0.8,0.5);
\coordinate (D10) at (0.8,0.3);

\coordinate (E01) at (0.3,0.7);
\coordinate (E10) at (0.5,0.7);

\draw[line] (B01) -- (A01) -- (A00) -- (A10) -- (B10);
\draw[line] (C01) -- (C12) -- (C22) -- (C21) -- (C10);

\draw[line] (D01) -- (D00) -- (D10);
\draw[line] (E01) -- (E10);

\end{tikzpicture}%
}



% we include whatever the user wants to include in the header
$for(header-includes)$
$header-includes$
$endfor$

% we include libraries (tex files) usually written in the `lib` directory
$for(libraries)$
\input{$libraries$}
$endfor$

% We include the title and author information based on the 
% `paper-meta.yaml` file.
$if(title)$ 
\title{$title$}
$endif$
\author{
$for(author)$
$author.name$$for(author.affiliation)$\thanks{$author.affiliation.name$}$endfor$
$sep$ \and
$endfor$
}

% For the date, we first check if the user has provided a date,
% and otherwise use the git meta inforamtion (if available).
$if(draft)$
  $if(date)$
    \date{$date$$if(git-meta)$ --- $git-meta.commit$$endif$}
  $else$
    $if(git-meta)$
      \date{$git-meta.date$\footnote{$git-meta.commit$ -- branch $git-meta.branch$ at $git-meta.origin$}}
    $endif$
  $endif$
$else$
  $if(date)$
    \date{$date$}
  $else$
    \date{\today}
  $endif$
$endif$

$if(anonymous)$
\newcommand{\repositoryUrl}{$if(repository.anonymous)$$repository.anonymous$$else$Undefined Anonymous Repository$endif$}
$else$
\newcommand{\repositoryUrl}{\url{$if(repository.url)$$repository.url$$else$$repository$$endif$}}
$endif$

\knowledge{notion}
 | kl-usage

% Now, we create the document itself.
\begin{document}
% Generate the title page
\maketitle
% Print the abstract
\begin{abstract}
$if(abstract)$
    $abstract$
$else$
    Please write an abstract in the \texttt{paper-meta.yaml} file.
$endif$
\end{abstract}

$if(keywords)$
\paragraph{Keywords:}
    $for(keywords)$$it$$sep$, $endfor$.
$endif$
$if(classification.acm_12)$
\paragraph{ACM CSS 2012:}
$for(classification.acm_12)$
$it.desc$$sep$;
$endfor$.
$endif$
\paragraph{Repository:} \repositoryUrl
$if(relatedversion)$
\paragraph{Related versions:}
$for(relatedversion)$
\href{$it.url$}{$it.name$ ($it.kind$)} $if(it.cite)$\cite{$it.cite$}$endif$
$endfor$
$endif$

\paragraph{Acknowledgments.}
$if(acknowledgments)$
$acknowledgments$
$endif$
$for(author)$
$for(author.funding)$$it$ $endfor$
$endfor$

\bigskip

\klogo\ This document uses \href{https://ctan.org/pkg/knowledge}{knowledge}:
\kl[kl-usage]{notion} points to its \intro[kl-usage]{definition}. 

% Include the content of the paper
$body$

% Include the bibliography
$if(bibliography)$
\bibliographystyle{plainurl}
\bibliography{$for(bibliography)$$it$$sep$,$endfor$}
$endif$

% If there are any appendices, we include them here.
$if(appendix)$
\appendix
$for(appendix)$
\input{$appendix$}
$endfor$
$endif$

$for(include-after)$
$include-after$
$endfor$

\end{document}
